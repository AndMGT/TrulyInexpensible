<div class="row mt-5">
<div class="col-md-6">
<div class="card">
  <div class="card-body">
    <h5 class="card-title">Income Sources</h5>
    <h6 class="card-subtitle mb-2 text-muted">Distribution per source (Last 3 months)</h6>
<canvas id="myChart" width="50" height="50"></canvas>
  </div>
</div>
<script>

const showChart=(data)=>{
  console.log(data)
const [values,labels] = [Object.values(data.sources_data).map(item=>item.amount),Object.keys(data.sources_data)]
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: 'Amount',
            data: values,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 0.5
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
}

const getSourcesData=()=>{
fetch('/income/three_months_summary').then(res=>res.json()).
then(data=>
{
  showChart(data);
}
)
}

window.addEventListener('load',getSourcesData)





</script>

</div><div class="col-md-6">

<div class="card">
  <div class="card-body">
    <h5 class="card-title">Cumulative Comparison</h5>
    <h6 class="card-subtitle mb-2 text-muted">Past 3 months Income</h6>
<canvas id="speedChart" width="50" height="50"></canvas>
  </div>
	<script>
var monthCumulative = document.getElementById("speedChart");

Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "February 2020",
    data: [0,0, 0, 0, 0],
    lineTension: 0,
    fill: false,
    borderColor: 'rgb(80,151,215)'
  };

var dataSecond = {
    label: "March 2020",
    data: [0,0, 0, 0, 0],
    lineTension: 0,
    fill: false,
  borderColor:  'rgb(231,109, 132)',
  };

  var thirdSecond = {
    label: "April 2020",
    data: [0,0, 0, 5021000, 0],
    lineTension: 0,
    fill: false,
  borderColor:  '#18bc9c ',
  };

var speedData = {
  labels: ['0','7','15','22','29'],
  datasets: [dataFirst, dataSecond,thirdSecond]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 10,
      fontSize:10,
    }
  }
};

var lineChart = new Chart(monthCumulative, {
  type: 'line',
  data: speedData,
  options: chartOptions
});

	</script>
</div>

</div>
